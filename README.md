<h3 align="center">Тех-задание для 'EffectiveMobile'</h3>
<div align="center">
  <p align="center">
    Документация по работе приложения Cистема управления библиотекой.
    <br />
</div>

## Как клонировать проект

Использован Pytnon 3.12

1. Клонируйте репозиторий
   ```sh
   git clone https://github.com/Rev-1b/EffectiveMobile.git
   ```
2. Активируйте виртуальное окружение
   ```sh
   source venv/bin/activate
   ```

## О реализации

Это консольное приложение для управления библиотекой, разработанное на Python. Оно позволяет добавлять, удалять, искать
книги и управлять их статусом.

## Возможности

- Добавление новых книг
- Удаление книг по ID
- Поиск книг по ключевому слову (название, автор или год)
- Отображение списка всех книг
- Обновление статуса книги (в наличии/выдана)
- Сохранение данных в JSON файл

## Использование

Запустите главный скрипт:

```sh
python main.py 
```

Следуйте инструкциям в консольном меню для управления библиотекой.

## Структура проекта

- <a href="#main">main.py</a>: Основной скрипт с пользовательским интерфейсом
- <a href="#library">library.py</a>: Класс Library для управления книгами
- <a href="#book">book.py</a>: Класс Book для представления книги
- <a href="#enums">enums.py</a>: Перечисления для статусов книг и пунктов меню
- <a href="#utils">utils.py</a>: Вспомогательные функции
- <a href="#data">data.json</a>: Файл для хранения данных о книгах
- <a href="#test_library">test_library.py</a>: Модуль с юнит-тестами

## <span id="main">main.py</span>

Это основной модуль программы, который служит точкой входа в приложение. Он отвечает за:

- Инициализацию объекта библиотеки
- Создание и отображение пользовательского меню
- Обработку пользовательского ввода
- Вызов соответствующих методов класса Library в зависимости от выбора пользователя
- Этот модуль использует MenuChoice из enums.py для структурирования меню и вызывает вспомогательные функции из utils.py
  для обработки ввода.

## <span id="library">library.py</span>

Этот модуль содержит класс Library, который является центральным компонентом системы. Он отвечает за:

- Хранение списка книг
- Загрузку и сохранение данных в JSON файл
- Добавление новых книг
- Удаление книг
- Поиск книг по ключевому слову
- Обновление статуса книг
- Отображение списка всех книг
- Класс Library использует класс Book для представления отдельных книг.

## <span id="book">book.py</span>

Этот модуль определяет класс Book, который представляет отдельную книгу. Он содержит:

- Атрибуты книги (id, название, автор, год, статус)
- Метод str для строкового представления книги
- Методы from_dict и to_dict для сериализации и десериализации объектов Book

## <span id="enums">enums.py</span>

Этот модуль содержит перечисления (Enum), используемые в проекте:

- BookStatus: перечисление для статусов книги (в наличии, выдана)
- MenuChoice: перечисление для пунктов меню

## <span id="utils">utils.py</span>

Модуль с вспомогательными функциями, которые используются в других частях программы:

- get_int_input: получение целочисленного ввода от пользователя
- get_year_input: получение ввода года от пользователя
- get_book_status: получение статуса книги от пользователя
- print_search_results: вывод результатов поиска книг

## <span id="data.json">data.json</span>

Это файл для хранения данных о книгах. Он не является Python-модулем, но играет важную роль в сохранении состояния
библиотеки между запусками программы.

## <span id="test_library">test_library.py</span>

Модуль с юнит-тестами для проверки функциональности класса Library. Он включает тесты для:

- Загрузки книг из файла
- Добавления новых книг
- Удаления книг
- Поиска книг
- Обновления статуса книг

## Обработка ошибок и исключений

В проекте реализована система обработки ошибок и исключений для обеспечения стабильной работы и удобства пользования:

1. Ввод данных:
    - При вводе нечисловых значений для ID или года издания книги выбрасывается ValueError, который обрабатывается с
      выводом понятного пользователю сообщения об ошибке.
    - Функция get_int_input() в utils.py обеспечивает повторный запрос ввода при некорректных данных.
    - Функция get_year_input() дополнительно проверяет, чтобы введенный год не превышал текущий.

2. Выбор пункта меню:
    - При выборе несуществующего пункта меню возникает KeyError, который обрабатывается в main.py с выводом сообщения "
      Неверный выбор. Попробуйте снова."

3. Работа с файлами:
    - При попытке загрузки данных из несуществующего файла возникает FileNotFoundError, который обрабатывается в методе
      load_books() класса Library. В этом случае создается пустой список книг.

4. Операции с книгами:
    - При попытке удаления или обновления статуса несуществующей книги выводится соответствующее сообщение об ошибке.

5. Ввод статуса книги:
    - Функция get_book_status() в utils.py обеспечивает повторный запрос ввода при указании некорректного статуса книги.

Все эти механизмы обработки ошибок позволяют программе корректно реагировать на нестандартные ситуации, предоставляя
пользователю понятную обратную связь и возможность исправить ошибку.

## Тестирование

Для запуска тестов используйте:

```sh
python -m unittest test_library.py
```

Тесты охватывают следующие аспекты системы:

1. Инициализация библиотеки:
    - Тест на корректную загрузку пустой библиотеки
    - Тест на корректную загрузку библиотеки с существующими данными

2. Добавление книг:
    - Тест на корректное добавление новой книги
    - Проверка увеличения количества книг после добавления

3. Удаление книг:
    - Тест на корректное удаление существующей книги
    - Проверка уменьшения количества книг после удаления

4. Поиск книг:
    - Тест на поиск книги по названию
    - Тест на поиск книги по автору
    - Тест на поиск книги по году издания
    - Проверка корректности результатов поиска

5. Обновление статуса книги:
    - Тест на корректное обновление статуса существующей книги
    - Проверка, что статус действительно изменился

6. Обработка ошибок:
    - Тест на попытку удаления несуществующей книги
    - Тест на попытку обновления статуса несуществующей книги